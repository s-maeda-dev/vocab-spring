<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/head :: head('VocabularySpring - ログイン')}"></head>

<body
    class="antialiased min-h-screen flex flex-col items-center justify-center selection:bg-[#A68B77] selection:text-white">
    <style>
        .neu-raised {
            background: #F4F2EE;
            box-shadow: 9px 9px 18px #D1CDC7, -9px -9px 18px #FFFFFF;
            border: 1px solid rgba(255, 255, 255, 0.4);
        }

        .neu-action-btn {
            background: #A68B77;
            color: #FFFFFF;
            box-shadow: 6px 6px 14px #D1CDC7, -6px -6px 14px #FFFFFF;
            transition: all 0.2s ease;
            border: none;
        }

        .neu-action-btn:active {
            background: #967d6b;
            box-shadow: inset 3px 3px 6px #7a6556, inset -3px -3px 6px #b29580;
            transform: translateY(1px);
        }

        .neu-toggle-active {
            background: #F4F2EE;
            box-shadow: 4px 4px 8px #D1CDC7, -4px -4px 8px #FFFFFF;
            color: #A68B77;
        }

        .neu-pressed:focus-within {
            box-shadow: inset 6px 6px 12px #D1CDC7, inset -6px -6px 12px #FFFFFF, 0 0 0 1px rgba(166, 139, 119, 0.3);
        }

        .placeholder-custom::placeholder {
            color: #A99B91;
            opacity: 1;
        }

        /* Autofill highlight fix */
        input:-webkit-autofill,
        input:-webkit-autofill:hover,
        input:-webkit-autofill:focus,
        input:-webkit-autofill:active {
            transition: background-color 5000s ease-in-out 0s, color 5000s ease-in-out 0s;
            -webkit-text-fill-color: #4A3B32 !important;
            background-color: transparent !important;
        }
    </style>

    <div class="w-full max-w-md px-8 py-10 flex flex-col h-full justify-center">
        <div class="flex flex-col items-center mb-10">
            <div class="w-20 h-20 rounded-full neu-raised flex items-center justify-center mb-6 text-[#A68B77]">
                <span class="material-symbols-outlined text-4xl">local_florist</span>
            </div>
            <h1 class="text-3xl font-bold tracking-tight text-[#4A3B32] mb-2 text-center font-display">
                わたしの単語帳
            </h1>
            <p class="text-[#8C7A6D] text-center text-sm font-medium tracking-wide">VocabularySpring</p>
        </div>

        <div class="p-1.5 rounded-xl neu-pressed flex mb-8 relative">
            <a href="/login"
                class="flex-1 py-3 rounded-lg text-sm font-bold neu-toggle-active z-10 transition-all text-center block"
                style="text-decoration: none;">ログイン</a>
            <a href="/register"
                class="flex-1 py-3 rounded-lg text-sm font-medium text-[#8C7A6D] hover:text-[#4A3B32] transition-colors z-10 text-center block"
                style="text-decoration: none;">新規登録</a>
        </div>

        <!-- Error message from Spring Security -->
        <div th:if="${param.error}" class="mb-4 text-center">
            <p class="text-red-500 text-sm font-bold">ユーザー名またはパスワードが間違っています。</p>
        </div>
        <div th:if="${param.logout}" class="mb-4 text-center">
            <p class="text-[#A68B77] text-sm font-bold">ログアウトしました。</p>
        </div>
        <div th:if="${param.registered}" class="mb-4 text-center">
            <p class="text-[#A68B77] text-sm font-bold">登録が完了しました。ログインしてください。</p>
        </div>

        <form class="flex flex-col gap-6 w-full" th:action="@{/login}" method="post">
            <div class="space-y-2 group">
                <label class="block text-xs font-bold text-[#6D5C50] ml-3 uppercase tracking-wider" for="username">ユーザー名
                    （Username）</label>
                <div
                    class="neu-pressed rounded-2xl flex items-center px-5 h-14 transition-all bg-[#F4F2EE] overflow-hidden">
                    <span class="material-symbols-outlined text-[#A68B77] mr-3 text-xl">person</span>
                    <input
                        class="bg-transparent border-none w-full text-[#4A3B32] placeholder-custom focus:ring-0 focus:outline-none h-full text-base font-medium"
                        id="username" name="username" required placeholder="User name" type="text" />
                </div>
            </div>

            <div class="space-y-2 group">
                <label class="block text-xs font-bold text-[#6D5C50] ml-3 uppercase tracking-wider" for="password">パスワード
                    （Password）</label>
                <div
                    class="neu-pressed rounded-2xl flex items-center px-5 h-14 transition-all bg-[#F4F2EE] overflow-hidden">
                    <span class="material-symbols-outlined text-[#A68B77] mr-3 text-xl">lock</span>
                    <input
                        class="bg-transparent border-none w-full text-[#4A3B32] placeholder-custom focus:ring-0 focus:outline-none h-full text-base font-medium"
                        id="password" name="password" required placeholder="••••••••" type="password" />
                    <button
                        class="text-[#A68B77] hover:text-[#8a7363] transition-colors focus:outline-none flex items-center p-1"
                        type="button"
                        onclick="const p=document.getElementById('password'); if(p.type==='password'){p.type='text';}else{p.type='password';}">
                        <span class="material-symbols-outlined text-xl">visibility</span>
                    </button>
                </div>
            </div>

            <button
                class="w-full h-14 rounded-2xl neu-action-btn mt-6 font-bold text-lg tracking-wide flex items-center justify-center gap-2 group"
                type="submit">
                <span>ログイン</span>
                <span
                    class="material-symbols-outlined group-hover:translate-x-1 transition-transform">arrow_forward</span>
            </button>
        </form>

        <div class="mt-12 text-center">
            <p class="text-[#8C7A6D] text-sm font-medium">アカウントをお持ちでないですか？ <a
                    class="text-[#A68B77] font-bold hover:underline" href="/register">新規登録する</a></p>
        </div>
    </div>
</body>

</html>