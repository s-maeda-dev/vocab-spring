<!DOCTYPE html>
<html lang="ja" xmlns:th="http://www.thymeleaf.org">

<head th:replace="~{fragments/head :: head('クイズ実行中 - VocabularySpring')}"></head>

<body
    class="bg-background-light text-text-main font-body min-h-screen flex flex-col items-center justify-center w-full selection:bg-primary/20 antialiased p-0 m-0">
    <style>
        .neu-input {
            box-shadow: inset 4px 4px 8px #D6D2CC, inset -4px -4px 8px #FFFFFF;
            border: none;
            background-color: #EDEBE6;
            transition: all 0.3s ease;
        }

        .neu-input:focus {
            outline: none;
            box-shadow: inset 6px 6px 12px #D6D2CC, inset -6px -6px 12px #FFFFFF;
            background-color: #EFEFEA;
        }

        .neu-transition {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            min-height: max(884px, 100dvh);
        }
    </style>
    <div class="relative w-full max-w-md bg-background-light h-screen min-h-[100dvh] flex flex-col shadow-2xl">

        <div class="px-6 pt-10 pb-4 flex items-center justify-between z-10 w-full">
            <a href="/quiz/settings"
                class="flex items-center justify-center w-12 h-12 rounded-full bg-background-light shadow-neumorphic-sm hover:shadow-neumorphic-pressed active:shadow-neumorphic-pressed text-text-main neu-transition group">
                <span
                    class="material-symbols-outlined font-bold text-[22px] group-hover:text-primary transition-colors">close</span>
            </a>
            <h1 class="text-text-main font-bold text-lg tracking-wide">クイズ実行中</h1>
            <div
                class="flex items-center gap-2 px-5 h-10 rounded-full bg-background-light shadow-neumorphic-pressed text-primary font-bold text-sm tracking-wide">
                <span th:text="${quizSession.currentQuestionNumber}">1</span>
                <span class="text-text-sub font-normal opacity-50">/</span>
                <span class="text-text-sub" th:text="${quizSession.totalQuestions}">5</span>
            </div>
        </div>

        <div class="px-8 py-2 w-full">
            <div class="flex justify-between items-end mb-3">
                <span class="text-xs font-semibold text-text-sub tracking-wider pl-1">進捗状況</span>
                <span class="text-xs font-bold text-primary"
                    th:text="${#numbers.formatDecimal(quizSession.currentQuestionNumber * 100.0 / quizSession.totalQuestions, 0, 0)} + '%'">20%</span>
            </div>
            <div class="h-3 w-full rounded-full bg-background-light shadow-neumorphic-pressed p-[2px]">
                <div class="h-full rounded-full bg-primary shadow-[2px_2px_4px_rgba(161,136,127,0.3)] transition-all ease-out duration-500"
                    th:style="'width: ' + ${quizSession.currentQuestionNumber * 100.0 / quizSession.totalQuestions} + '%;'">
                </div>
            </div>
        </div>

        <form class="flex-1 flex flex-col px-6 gap-2 w-full justify-center" th:action="@{/quiz/answer}" method="post">
            <div
                class="w-full relative rounded-3xl bg-surface shadow-neumorphic-deep p-6 pb-2 flex flex-col items-center text-center gap-1 mt-6 mb-2 neu-transition border border-white/40">
                <div
                    class="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 rounded-full bg-surface shadow-neumorphic-flat flex items-center justify-center z-10 border-4 border-background-light">
                    <span class="material-symbols-outlined text-3xl text-primary drop-shadow-sm">school</span>
                </div>

                <div class="pt-6 w-full flex flex-col items-center">
                    <p class="text-text-sub text-[10px] font-bold tracking-widest mb-1 opacity-80">意味</p>
                    <h1 class="text-[1.5rem] md:text-[1.8rem] font-bold text-text-main mb-2 tracking-tight drop-shadow-sm leading-snug"
                        th:text="${word.definition}">意味</h1>
                    <div class="w-full border-t border-text-sub/10 my-1"></div>
                </div>
            </div>

            <div class="flex flex-col gap-2 mt-2 w-full">
                <label class="text-xs font-bold text-text-sub ml-2 block mb-0.5">回答を入力</label>
                <div class="relative w-full">
                    <input
                        class="w-full p-4 rounded-2xl neu-input text-lg text-text-main placeholder-text-sub/50 font-medium tracking-wide focus:ring-0 font-display"
                        placeholder="答えを入力してください..." type="text" id="answer" name="answer" required autofocus
                        autocomplete="off" />
                    <span
                        class="absolute right-5 top-1/2 -translate-y-1/2 material-symbols-outlined text-text-sub/40">edit</span>
                </div>
            </div>

            <div class="w-full pt-4">
                <button type="submit"
                    class="w-full py-4 rounded-2xl bg-primary text-white font-bold text-base tracking-wide shadow-float active:shadow-neumorphic-pressed active:translate-y-[1px] neu-transition flex items-center justify-center gap-2 hover:bg-primary-dark">
                    <span>回答を確認</span>
                    <span class="material-symbols-outlined text-[20px]">check_circle</span>
                </button>
            </div>
        </form>


    </div>
</body>

</html>