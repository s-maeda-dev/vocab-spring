# 単語登録機能の拡張計画書 (柔軟な入力形式への対応)

本ドキュメントは、多様な単語学習パターン（専門用語の定義学習、英単語の翻訳学習）に対応するため、データモデルとUIを再定義する計画書です。

## 1. 背景と目的

当初は「英語」と「日本語」という固定フィールドでの管理を検討しましたが、以下のユースケースにおいて柔軟性が不足していることが判明しました。

- **パターン1 (専門用語学習)**: 用語自体に「英語表記」と「日本語表記」の両方が存在し、さらにその「定義・説明」を覚えたい場合。
  - 例: Term="Dependency Injection, 依存性の注入", Definition="ソフトウェアデザインパターンの一つ..."
- **パターン2 (語彙学習)**: 英単語を見て日本語訳を覚えたい場合。
  - 例: Term="Apple", Definition="りんご"

これらを網羅するため、フィールドを言語で固定せず、「見出し語(Term)」と「意味・定義(Definition)」という構成に変更し、見出し語には複数の表記（カンマ区切り）を許容する仕様とします。

## 2. 変更内容

### 2-1. データモデル (Entity) の再定義

`Word` エンティティを汎用的な構成に戻します。

- **`term` (見出し語)**:
  - 複数の単語や表記を入力可能とする（例：「Apple」または「Dependency Injection, 依存性の注入」）。
  - 最大5つまで入力可能とする運用（システム的には文字列として保持）。
- **`definition` (意味・定義)**:
  - 単語の翻訳、または用語の説明文を格納する。
- **`exampleSentence` (例文)**:
  - 変更なし。

### 2-2. CSVとデリミタに関する方針

- **区切り文字**: ユーザーの要望通り「カンマ (`,`)」を採用します。
- **CSV対応**: 将来的なCSVインポート/エクスポート時は、フィールド値をダブルクォートで囲む（`"word1, word2"`）ことで、カンマを含むデータも問題なく取り扱える仕様とします（CSVの標準仕様準拠）。

### 2-3. フロントエンド (UI) の修正

- **登録/編集フォーム (`word_form.html`)**:
  - ラベルを「単語 (カンマ区切りで複数入力可)」に変更。
  - プレースホルダーに「例: Dictionary, 辞書」のように表示し、複数入力を促す。
- **一覧画面 (`word_list.html`)**:
  - カラムを「単語」「意味」の構成に戻す。

## 3. 実装手順

1.  **Entityの修正**: `Word.java` を `english`/`japanese` から `term`/`definition` に戻す（以前の状態へのロールバックに近いが、意図は異なる）。
2.  **Controller/Serviceの修正**: フィールド名の変更に伴う修正。
3.  **Templateの修正**: UIラベルとバインディングの修正。

## 4. 検証項目

- [ ] パターン1の入力（英語, 日本語 / 説明）が登録・表示できること。
- [ ] パターン2の入力（英語 / 日本語訳）が登録・表示できること。
- [ ] 一覧画面でカンマ区切りの単語が正しく表示されること。
