<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>ã‚¯ã‚¤ã‚ºè¨­å®š - VocabSpring</title>
    <style>
        .mode-selector {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .mode-card {
            flex: 1;
            border: 2px solid #ddd;
            border-radius: 10px;
            padding: 14px 16px;
            cursor: pointer;
            transition: border-color 0.2s, background-color 0.2s;
        }

        .mode-card:has(input:checked) {
            border-color: #4f46e5;
            background-color: #eef2ff;
        }

        .mode-card input[type="radio"] {
            margin-right: 8px;
        }

        .mode-title {
            font-weight: bold;
            font-size: 1rem;
        }

        .mode-desc {
            font-size: 0.82rem;
            color: #666;
            margin-top: 4px;
        }

        #categorySection {
            transition: opacity 0.2s;
        }

        #categorySection.disabled {
            opacity: 0.4;
            pointer-events: none;
        }
    </style>
</head>

<body>
    <h1>ã‚¯ã‚¤ã‚ºè¨­å®š</h1>

    <div th:if="${error}" style="color: red; margin-bottom: 12px;" th:text="${error}"></div>

    <form th:action="@{/quiz/start}" method="post">

        <!-- â”€â”€ å‡ºé¡Œãƒ¢ãƒ¼ãƒ‰é¸æŠ â”€â”€ -->
        <fieldset style="border: none; padding: 0; margin-bottom: 16px;">
            <legend style="font-weight: bold; margin-bottom: 8px;">å‡ºé¡Œãƒ¢ãƒ¼ãƒ‰ã‚’é¸æŠ:</legend>
            <div class="mode-selector">
                <label class="mode-card">
                    <input type="radio" id="modeAll" name="quizMode" value="all" checked
                        onchange="onModeChange(this.value)">
                    <span class="mode-title">ğŸ“š å…¨å˜èªã‹ã‚‰å‡ºé¡Œ</span>
                    <div class="mode-desc">ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã™ã¹ã¦ã®å˜èªã®ä¸­ã‹ã‚‰å‡ºé¡Œã—ã¾ã™</div>
                </label>
                <label class="mode-card">
                    <input type="radio" id="modeWeak" name="quizMode" value="weak" onchange="onModeChange(this.value)">
                    <span class="mode-title">ğŸ¯ è‹¦æ‰‹ãªå˜èªã‹ã‚‰å‡ºé¡Œ</span>
                    <div class="mode-desc">éå»ã«é–“é•ãˆãŸå˜èªã‚’å„ªå…ˆçš„ã«å‡ºé¡Œã—ã¾ã™</div>
                </label>
            </div>
        </fieldset>

        <!-- â”€â”€ ã‚«ãƒ†ã‚´ãƒªé¸æŠï¼ˆè‹¦æ‰‹ãƒ¢ãƒ¼ãƒ‰æ™‚ã¯éæ´»æ€§ï¼‰ â”€â”€ -->
        <div id="categorySection">
            <label for="categoryId">ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ:</label>
            <select id="categoryId" name="categoryId">
                <option value="">å…¨ã‚«ãƒ†ã‚´ãƒªã‹ã‚‰å‡ºé¡Œ</option>
                <option th:each="category : ${categories}" th:value="${category.id}" th:text="${category.name}">
                </option>
            </select>
            <br><br>
        </div>

        <!-- â”€â”€ å‡ºé¡Œæ•°é¸æŠ â”€â”€ -->
        <label for="totalQuestions">å‡ºé¡Œæ•°ã‚’é¸æŠ:</label>
        <select id="totalQuestions" name="totalQuestions">
            <option value="5">5å•</option>
            <option value="10">10å•</option>
        </select>
        <br><br>

        <button type="submit">ã‚¯ã‚¤ã‚ºã‚’é–‹å§‹ã™ã‚‹</button>
    </form>

    <br>
    <a href="/">ãƒ›ãƒ¼ãƒ ã¸æˆ»ã‚‹</a>

    <script>
        /**
         * å‡ºé¡Œãƒ¢ãƒ¼ãƒ‰ãŒå¤‰ã‚ã£ãŸã¨ãã«ã‚«ãƒ†ã‚´ãƒªé¸æŠã®è¡¨ç¤ºã‚’åˆ¶å¾¡ã™ã‚‹ã€‚
         * è‹¦æ‰‹ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã¯ã‚«ãƒ†ã‚´ãƒªé¸æŠã‚’ç°è‰²ã«ã—ã¦é¸ã¹ãªã„ã‚ˆã†ã«ã™ã‚‹ã€‚
         */
        function onModeChange(mode) {
            const categorySection = document.getElementById('categorySection');
            if (mode === 'weak') {
                categorySection.classList.add('disabled');
                document.getElementById('categoryId').value = ''; // é¸æŠã‚’ãƒªã‚»ãƒƒãƒˆ
            } else {
                categorySection.classList.remove('disabled');
            }
        }
    </script>
</body>

</html>