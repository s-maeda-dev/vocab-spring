# 1. プロダクト全体要件定義書

## 1.1 プロダクト概要

- **名称**: My単語帳 VocabularySpring
- **目的**: 英単語のみに限らず、専門用語などを含めた単語学習アプリ。ユーザーごとに独自の単語帳を作成し、一問一答形式のテストとAIによる学習サポートを通じて、知識の定着と学習継続のモチベーションを高める。

## 1.2 機能要件

### Phase1. 認証・ユーザー管理

- **ユーザー登録・ログイン**: メールアドレス（またはユーザー名）とパスワードによる認証。
- **ログアウト機能**: セッションの破棄。
- **パスワード暗号化**: Spring Securityを用いたセキュアな保存。

### Phase2. 単語管理（ユーザー紐付け）

- **手動入力**: 画面上から「単語」「意味」「カテゴリ」などを一語ずつ登録・編集・削除できる機能。
- **CSV一括取込**: ユーザー固有の規定フォーマットのCSVファイルをアップロードし、単語を一括登録する機能。
- **カテゴリ管理**: ユーザーごとに単語を任意のカテゴリに分類し、一覧表示・絞り込みができる機能。

### Phase3. クイズ（一問一答）

- **出題ロジック**: カテゴリ指定、または「苦手単語（誤答率の高いもの）」のみを指定しての一問一答形式の出題。
- **解答モード（文字）**: テキスト入力による解答機能。完全一致（または柔軟な文字列比較）での正誤判定。
- **解答モード（音声）**: Web Speech API等を利用した音声入力機能。
- **音声フォールバック**: 認識精度を考慮し、明らかな不正解以外は即座に「×」にせず「もう一度お願いします」と促す。規定回数（例: 2回）聞き取れない場合は文字入力モードへ自動遷移する。

### Phase4. 学習記録・AI分析

- **履歴蓄積**: ユーザーごとに各単語の正答・誤答の履歴、解答にかかった時間などをDBに蓄積する。
- **苦手分析**: 過去の正答率が一定基準を下回るものを「苦手単語」としてフラグ付けする。
- **偉人の名言表示**: クイズ終了画面の導入として、学習や努力に関する偉人の名言をランダム（または成績表に応じた選定）で表示する。
- **結果一覧表示**: ユーザーの解答、正答、正誤判定の一覧を画面に表示する。
- **AIフィードバック**: Gemini 3 Flash APIを呼び出し、今回の結果と過去の学習履歴を比較して、ユーザーに向けたパーソナライズされた励ましやアドバイスを生成・表示する。


## 1.3 技術スタック

- **Backend**: Java 21 / Spring Boot 3.x
- **Security**: Spring Security (Sessionベース または JWT)
- **Build**: Maven (Artifact ID: `vocab-spring`)
- **Database**: MySQL
- **AI API**: Google Gemini 3 Flash
- **IDE**: Windsurf
- **Project Path**: `C:\Users\saya0\develop\vocab-spring`