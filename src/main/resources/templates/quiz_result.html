<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="~{fragments/common :: common_head}">
    <title>Result - VocabSpring</title>
</head>

<body class="bg-background-light dark:bg-background-dark min-h-screen flex flex-col font-display">

    <!-- Header Navigation -->
    <header class="flex items-center justify-between p-6">
        <div class="flex items-center gap-4">
            <a th:href="@{/quiz/settings}"
                class="neu-icon-pill w-10 h-10 rounded-lg flex items-center justify-center text-slate-600">
                <span class="material-symbols-outlined">close</span>
            </a>
            <div>
                <h1 class="text-slate-900 dark:text-slate-100 font-bold text-lg leading-none">Daily Vocab</h1>
                <p class="text-primary text-xs font-medium uppercase tracking-wider mt-1">Quiz Result</p>
            </div>
        </div>
    </header>

    <!-- Main Content Area -->
    <main class="flex-1 flex flex-col px-6 py-4 max-w-md mx-auto w-full">
        <!-- Progress Bar (Static here) -->
        <div class="mb-10">
            <div class="flex justify-between items-end mb-3 px-1">
                <span class="text-slate-500 text-sm font-medium">Session Progress</span>
                <span class="text-primary font-bold text-sm"
                    th:text="${quizSession.currentQuestionNumber - 1} + ' / ' + ${quizSession.totalQuestions}">1 /
                    5</span>
            </div>
            <div class="neu-pressed h-4 w-full rounded-full p-1 bg-slate-100">
                <div class="h-full bg-primary rounded-full"
                    th:style="'width: ' + (${quizSession.currentQuestionNumber - 1} * 100 / ${quizSession.totalQuestions}) + '%'">
                </div>
            </div>
        </div>

        <!-- Result Card -->
        <div class="flex-1 flex flex-col items-center justify-center py-4 gap-8">
            <div class="neu-raised w-full rounded-3xl p-8 flex flex-col items-center text-center gap-6"
                th:classappend="${isCorrect ? 'bg-green-50/50' : 'bg-red-50/50'}">

                <div class="w-20 h-20 rounded-full neu-raised flex items-center justify-center"
                    th:classappend="${isCorrect ? 'text-green-500' : 'text-red-500'}">
                    <span class="material-symbols-outlined !text-4xl"
                        th:text="${isCorrect ? 'check_circle' : 'cancel'}">check_circle</span>
                </div>

                <div class="space-y-2">
                    <h2 class="text-3xl font-black italic tracking-tight"
                        th:classappend="${isCorrect ? 'text-green-600' : 'text-red-600'}"
                        th:text="${isCorrect ? 'CORRECT!' : 'Oopsy!'}">CORRECT!</h2>
                    <p class="text-slate-500 font-medium" th:text="${isCorrect ? 'Great job, Alex!' : 'Almost there!'}">
                        Keep it up!</p>
                </div>

                <div class="w-full h-px bg-slate-200"></div>

                <div class="w-full space-y-4 text-left">
                    <div class="space-y-1">
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Your Answer</p>
                        <p class="text-lg font-bold text-slate-800" th:text="${userAnswer}">apple</p>
                    </div>
                    <div class="space-y-1">
                        <p class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Correct Answer</p>
                        <p class="text-lg font-bold text-primary" th:text="${correctWord.term}">Apple</p>
                        <p class="text-sm text-slate-500" th:text="${correctWord.definition}">A fruit that is red or
                            green.</p>
                    </div>
                </div>

                <div th:if="${correctWord.exampleSentence}"
                    class="neu-pressed w-full p-4 rounded-xl bg-white/50 text-left">
                    <p class="text-[10px] font-bold text-primary uppercase tracking-widest mb-1">Example</p>
                    <p class="text-sm italic text-slate-600" th:text="${correctWord.exampleSentence}">"An apple a day
                        keeps the doctor away."</p>
                </div>
            </div>

            <!-- Next Multi-phase Button -->
            <div class="w-full pt-4">
                <a th:href="${quizSession.currentQuestionNumber <= quizSession.totalQuestions} ? @{/quiz} : @{/quiz/summary}"
                    class="block">
                    <button
                        class="neu-button-primary w-full py-5 rounded-2xl text-white font-bold text-lg tracking-wide uppercase active:scale-[0.98] transition-all flex items-center justify-center gap-3">
                        <span
                            th:text="${quizSession.currentQuestionNumber <= quizSession.totalQuestions ? 'Next Question' : 'View Summary'}">Next
                            Question</span>
                        <span class="material-symbols-outlined">arrow_forward</span>
                    </button>
                </a>
            </div>
        </div>
    </main>

    <div class="h-12"></div>

</body>

</html>